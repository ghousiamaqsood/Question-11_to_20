import { Future } from '@typed/future';
import { createReadStream } from 'fs';
export function* readFile(...args) {
    return yield Future.create((reject, resolve) => {
        const buffers = [];
        const stream = createReadStream(...args);
        stream.on('data', (data) => buffers.push(data));
        stream.on('error', reject);
        stream.on('close', () => resolve(Buffer.concat(buffers)));
        return {
            dispose() {
                stream.close();
            },
        };
    });
}
//# sourceMappingURL=readFile.js.map