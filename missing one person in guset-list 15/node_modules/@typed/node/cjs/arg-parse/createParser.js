"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createParser = void 0;
const effects_1 = require("@typed/effects");
const env_1 = require("@typed/env");
const maybe_1 = require("@typed/maybe");
const findNamedArg_1 = require("./findNamedArg");
const getArgs_1 = require("./getArgs");
const types_1 = require("./types");
function createParser(name, options, parser) {
    const { aliases = [] } = options;
    function help() {
        if (options.help) {
            return effects_1.Effect.fromEnv(env_1.Pure.of(options.help));
        }
        return effects_1.Effect.fromEnv(env_1.Pure.of(''));
    }
    function* parse() {
        const args = yield* getArgs_1.getArgs();
        const argumentIndex = findNamedArg_1.findNamedArg(name, aliases, args);
        if (maybe_1.isNothing(argumentIndex)) {
            return types_1.ArgParserResult.none;
        }
        return parser(maybe_1.fromJust(argumentIndex), args);
    }
    return { help, parse };
}
exports.createParser = createParser;
//# sourceMappingURL=createParser.js.map