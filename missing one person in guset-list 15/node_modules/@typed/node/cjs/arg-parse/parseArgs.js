"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseArgs = void 0;
const maybe_1 = require("@typed/maybe");
const findRemainingArgs_1 = require("./findRemainingArgs");
const parseBooleanArg_1 = require("./parseBooleanArg");
const helpParser = parseBooleanArg_1.parseBooleanArg('help', { aliases: ['h'] });
function* parseArgs(parsers) {
    const value = { _: [], help: false };
    const parsedIndexes = [];
    for (const { parse } of [helpParser, ...parsers]) {
        const [indexesUsed, maybeValue] = yield* parse();
        if (maybe_1.isNothing(maybeValue)) {
            continue;
        }
        parsedIndexes.push(...indexesUsed);
        Object.assign(value, maybe_1.fromJust(maybeValue));
    }
    Object.assign(value, yield* findRemainingArgs_1.findRemainingArgs(parsedIndexes));
    return value;
}
exports.parseArgs = parseArgs;
//# sourceMappingURL=parseArgs.js.map