"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.readFile = void 0;
const future_1 = require("@typed/future");
const fs_1 = require("fs");
function* readFile(...args) {
    return yield future_1.Future.create((reject, resolve) => {
        const buffers = [];
        const stream = fs_1.createReadStream(...args);
        stream.on('data', (data) => buffers.push(data));
        stream.on('error', reject);
        stream.on('close', () => resolve(Buffer.concat(buffers)));
        return {
            dispose() {
                stream.close();
            },
        };
    });
}
exports.readFile = readFile;
//# sourceMappingURL=readFile.js.map